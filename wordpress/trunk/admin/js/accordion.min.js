jQuery(document).ready(function(){updateAccordionEditOutput();jQuery("body").on("change keyup",'input[type="text"], textarea',function(){bindAccordionBeforeunload()});jQuery("body").on("click",'input[type="submit"]',function(){unbindAccordionBeforeunload()});jQuery("body").on("click",'[data-direction="down"]',function(){moveAccordionDataDown(jQuery(this).parents("table").data("position"));bindAccordionBeforeunload()});jQuery("body").on("click",'[data-direction="up"]',function(){console.log("top");moveAccordionDataUp(jQuery(this).parents("table").data("position"));bindAccordionBeforeunload()});jQuery("#add_entries").bind("click",function(){addAccordionEntries();bindAccordionBeforeunload()})});function bindAccordionBeforeunload(){jQuery(window).bind("beforeunload",function(){return""})}function unbindAccordionBeforeunload(){jQuery(window).unbind("beforeunload")}function moveAccordionData(h,g){var b=jQuery('[data-position="'+h+'"] [data-type="headline"]');var f=jQuery('[data-position="'+g+'"] [data-type="headline"]');var c=jQuery('[data-position="'+h+'"] [data-type="text"]');var a=jQuery('[data-position="'+g+'"] [data-type="text"]');var e=f.val();var d=a.val();f.val(b.val());a.val(c.val());b.val(e);c.val(d)}function moveAccordionDataUp(a){moveAccordionData(a,a-1)}function moveAccordionDataDown(a){moveAccordionData(a,a+1)}function updateAccordionEditOutput(){var b=1;var a=jQuery("table.form-table:visible");a.each(function(){var c=jQuery(this);c.attr("data-position",b);if(b===1){c.find('[data-direction="up"]').css("display","none")}else{c.find('[data-direction="up"]').css("display","")}if(b===a.length){c.find('[data-direction="down"]').css("display","none")}else{c.find('[data-direction="down"]').css("display","")}b++})}function addAccordionEntries(){var b=jQuery("table.form-table:hidden").clone();var a=jQuery("table.form-table:visible").length;a+=1;b.html(b.html().replace("dummy",a)).css("display","");b.insertBefore(jQuery("#add_entries"));jQuery("#headline_dummy:visible").attr("id","headline_"+a);jQuery('[for="headline_dummy"]:visible').attr("for","headline_"+a);jQuery("#text_dummy:visible").attr("id","text_"+a);jQuery('[for="text_dummy"]:visible').attr("for","text_"+a);updateAccordionEditOutput()};