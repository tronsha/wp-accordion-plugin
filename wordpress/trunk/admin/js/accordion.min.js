jQuery(document).ready(function(){updateAccordionEditOutput();jQuery("body").on("change keyup",'input[type="text"], textarea',function(){bindAccordionBeforeunload()});jQuery("body").on("click",'input[type="submit"]',function(){unbindAccordionBeforeunload()});jQuery("body").on("click",'[data-direction="down"]',function(){moveAccordionDataDown(jQuery(this).parents("table").data("position"));bindAccordionBeforeunload()});jQuery("body").on("click",'[data-direction="up"]',function(){console.log("top");moveAccordionDataUp(jQuery(this).parents("table").data("position"));bindAccordionBeforeunload()});jQuery("#add_entries").bind("click",function(){addAccordionEntries();bindAccordionBeforeunload()})});function bindAccordionBeforeunload(){jQuery(window).bind("beforeunload",function(){return""})}function unbindAccordionBeforeunload(){jQuery(window).unbind("beforeunload")}function moveAccordionData(h,g){var b=jQuery('[data-position="'+h+'"] [data-type="headline"]');var f=jQuery('[data-position="'+g+'"] [data-type="headline"]');var c=jQuery('[data-position="'+h+'"] [data-type="text"]');var a=jQuery('[data-position="'+g+'"] [data-type="text"]');var e=f.val();var d=a.val();f.val(b.val());a.val(c.val());b.val(e);c.val(d)}function moveAccordionDataUp(a){moveAccordionData(a,a-1)}function moveAccordionDataDown(a){moveAccordionData(a,a+1)}function updateAccordionEditOutput(){var b=1;var a=jQuery("table.form-table:visible");a.each(function(){var c=jQuery(this);c.attr("data-position",b);c.find('[data-direction="up"]').css("display",b===1?"none":"");c.find('[data-direction="down"]').css("display",b===a.length?"none":"");c.find("tr:nth-child(1) h2 > strong").text(b+".)");c.find("tr:nth-child(2) label").attr("for","headline_"+b);c.find("tr:nth-child(2) input").attr("id","headline_"+b);c.find("tr:nth-child(3) label").attr("for","text_"+b);c.find("tr:nth-child(3) textarea").attr("id","text_"+b);b++})}function addAccordionEntries(){jQuery("table.form-table:hidden").clone().css("display","").insertBefore(jQuery("#add_entries"));updateAccordionEditOutput()};