jQuery(document).ready(function(){updateOutput();jQuery('input[type="text"], textarea').bind("change keyup",function(){bindBeforeunload()});jQuery('input[type="submit"]').bind("click",function(){unbindBeforeunload()});jQuery('[data-direction="down"]').bind("click",function(){moveDown(jQuery(this).parents("table").data("position"));bindBeforeunload()});jQuery('[data-direction="up"]').bind("click",function(){moveUp(jQuery(this).parents("table").data("position"));bindBeforeunload()})});function bindBeforeunload(){jQuery(window).bind("beforeunload",function(){return""})}function unbindBeforeunload(){jQuery(window).unbind("beforeunload")}function move(h,g){var b=jQuery('[data-position="'+h+'"] [data-type="headline"]');var f=jQuery('[data-position="'+g+'"] [data-type="headline"]');var c=jQuery('[data-position="'+h+'"] [data-type="text"]');var a=jQuery('[data-position="'+g+'"] [data-type="text"]');var e=f.val();var d=a.val();f.val(b.val());a.val(c.val());b.val(e);c.val(d)}function moveUp(a){move(a,a-1)}function moveDown(a){move(a,a+1)}function updateOutput(){var a=1;var b=jQuery("table.form-table");b.each(function(){var c=jQuery(this);c.attr("data-position",a);if(a===1){c.find('[data-direction="up"]').css("display","none")}else{c.find('[data-direction="up"]').css("display","")}if(a===b.length){c.find('[data-direction="down"]').css("display","none")}else{c.find('[data-direction="down"]').css("display","")}a++})};