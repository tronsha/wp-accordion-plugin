jQuery(document).ready(function(){updateAccordionEdit();jQuery("body").on("click",'.accordion-edit [data-button="add"]',function(){jQuery("table.form-table.accordion-entry:hidden").clone().css("display","").insertBefore(jQuery('[data-button="add"]'));updateAccordionEdit();bindAccordionBeforeunload()});jQuery("body").on("click",'.accordion-edit [data-button="delete"]',function(){jQuery(this).parents("table").remove();updateAccordionEdit();bindAccordionBeforeunload()});jQuery("body").on("click",'.accordion-edit [data-button="down"]',function(){moveAccordionDataDown(parseInt(jQuery(this).parents("table").attr("data-position")));bindAccordionBeforeunload()});jQuery("body").on("click",'.accordion-edit [data-button="up"]',function(){moveAccordionDataUp(parseInt(jQuery(this).parents("table").attr("data-position")));bindAccordionBeforeunload()});jQuery("body").on("change keyup",'.accordion-edit input[type="checkbox"], .accordion-edit input[type="text"], .accordion-edit textarea',function(){bindAccordionBeforeunload()});jQuery("body").on("click",'.accordion-edit input[type="submit"]',function(){unbindAccordionBeforeunload()})});function updateAccordionEdit(){var b=1;var a=jQuery("table.form-table.accordion-entry:visible");a.each(function(){var c=jQuery(this);c.attr("data-position",b);c.find('[data-button="up"]').css("display",b===1?"none":"");c.find('[data-button="down"]').css("display",b===a.length?"none":"");c.find("tr:nth-child(1) h2 > strong").text(b+".)");c.find("tr:nth-child(2) label").attr("for","headline_"+b);c.find("tr:nth-child(2) input").attr("id","headline_"+b);c.find("tr:nth-child(3) label").attr("for","text_"+b);c.find("tr:nth-child(3) textarea").attr("id","text_"+b);c.find("tr:nth-child(3) textarea").attr("data-type","text");b++})}function bindAccordionBeforeunload(){jQuery(window).on("beforeunload",function(){return""})}function unbindAccordionBeforeunload(){jQuery(window).off("beforeunload")}function moveAccordionData(h,g){var b=jQuery('[data-position="'+h+'"] [data-type="headline"]');var f=jQuery('[data-position="'+g+'"] [data-type="headline"]');var c=jQuery('[data-position="'+h+'"] [data-type="text"]');var a=jQuery('[data-position="'+g+'"] [data-type="text"]');var e=f.val();var d=a.val();f.val(b.val());a.val(c.val());b.val(e);c.val(d)}function moveAccordionDataUp(a){moveAccordionData(a,a-1)}function moveAccordionDataDown(a){moveAccordionData(a,a+1)};